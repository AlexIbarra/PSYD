   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"lab8.c"
  21              	.Ltext0:
  22              		.file 1 "../lab8.c"
 2013              		.align	2
 2014              	.LC0:
 2015 0000 0A0A4361 		.ascii	"\012\012Cargando en RAM el contenido de IIC-EEPROM "
 2015      7267616E 
 2015      646F2065 
 2015      6E205241 
 2015      4D20656C 
 2016 002d 41543234 		.ascii	"AT24C04:\012\000"
 2016      4330343A 
 2016      0A00
 2017 0037 00       		.align	2
 2018              	.LC1:
 2019 0038 202D204C 		.ascii	" - Lectura aleatoria (\000"
 2019      65637475 
 2019      72612061 
 2019      6C656174 
 2019      6F726961 
 2020 004f 00       		.align	2
 2021              	.LC2:
 2022 0050 20627974 		.ascii	" bytes): \000"
 2022      6573293A 
 2022      2000
 2023 005a 0000     		.align	2
 2024              	.LC3:
 2025 005c 206D730A 		.ascii	" ms\012\000"
 2025      00
 2026 0061 000000   		.align	2
 2027              	.LC4:
 2028 0064 202D204C 		.ascii	" - Lectura secuencial (\000"
 2028      65637475 
 2028      72612073 
 2028      65637565 
 2028      6E636961 
 2029              		.align	2
 2030              	.LC5:
 2031 007c 4552524F 		.ascii	"ERROR: lectura aleatoria y secuencial no son coinci"
 2031      523A206C 
 2031      65637475 
 2031      72612061 
 2031      6C656174 
 2032 00af 64656E74 		.ascii	"dentes\012\000"
 2032      65730A00 
 2033 00b7 00       		.align	2
 2034              	.LC6:
 2035 00b8 0A566F6C 		.ascii	"\012Volcado del contenido inicial de la memoria IIC"
 2035      6361646F 
 2035      2064656C 
 2035      20636F6E 
 2035      74656E69 
 2036 00e8 2D454550 		.ascii	"-EEPROM AT24C04:\012\000"
 2036      524F4D20 
 2036      41543234 
 2036      4330343A 
 2036      0A00
 2037 00fa 0000     		.align	2
 2038              	.LC7:
 2039 00fc 0A00     		.ascii	"\012\000"
 2040 00fe 0000     		.align	2
 2041              	.LC8:
 2042 0100 303000   		.ascii	"00\000"
 2043 0103 00       		.align	2
 2044              	.LC9:
 2045 0104 683A00   		.ascii	"h:\000"
 2046 0107 00       		.align	2
 2047              	.LC10:
 2048 0108 203B2000 		.ascii	" ; \000"
 2049              		.align	2
 2050              	.LC11:
 2051 010c 0A0A4D6F 		.ascii	"\012\012Modificacion del contenido de la memoria II"
 2051      64696669 
 2051      63616369 
 2051      6F6E2064 
 2051      656C2063 
 2052 0139 432D4545 		.ascii	"C-EEPROM AT24C04:\012\000"
 2052      50524F4D 
 2052      20415432 
 2052      34433034 
 2052      3A0A00
 2053              		.align	2
 2054              	.LC12:
 2055 014c 20202D20 		.ascii	"  - Introduzca una direccion (0h-1ffh): \000"
 2055      496E7472 
 2055      6F64757A 
 2055      63612075 
 2055      6E612064 
 2056 0175 000000   		.align	2
 2057              	.LC13:
 2058 0178 20202D20 		.ascii	"  - Introduzca el dato (0h-ffh): \000"
 2058      496E7472 
 2058      6F64757A 
 2058      63612065 
 2058      6C206461 
 2059 019a 0000     		.align	2
 2060              	.LC14:
 2061 019c 0A566F6C 		.ascii	"\012Volcando en la IIC-EEPROM AT24C04 el contenido "
 2061      63616E64 
 2061      6F20656E 
 2061      206C6120 
 2061      4949432D 
 2062 01cc 6465206C 		.ascii	"de la RAM:\012\000"
 2062      61205241 
 2062      4D3A0A00 
 2063              		.align	2
 2064              	.LC15:
 2065 01d8 202D2045 		.ascii	" - Escritura aleatoria (\000"
 2065      73637269 
 2065      74757261 
 2065      20616C65 
 2065      61746F72 
 2066 01f1 000000   		.align	2
 2067              	.LC16:
 2068 01f4 4552524F 		.ascii	"ERROR: La escritura aleatoria falla.\012\000"
 2068      523A204C 
 2068      61206573 
 2068      63726974 
 2068      75726120 
 2069 021a 0000     		.align	2
 2070              	.LC17:
 2071 021c 202D2045 		.ascii	" - Escritura secuencial (\000"
 2071      73637269 
 2071      74757261 
 2071      20736563 
 2071      75656E63 
 2072 0236 0000     		.align	2
 2073              	.LC18:
 2074 0238 4552524F 		.ascii	"ERROR: La escritura secuencial falla.\012\000"
 2074      523A204C 
 2074      61206573 
 2074      63726974 
 2074      75726120 
 2075 025f 00       		.align	2
 2076              	.LC19:
 2077 0260 0A417061 		.ascii	"\012Apague la placa y vuelva a cargar y ejecutar el"
 2077      67756520 
 2077      6C612070 
 2077      6C616361 
 2077      20792076 
 2078 0290 2070726F 		.ascii	" programa.\012\000"
 2078      6772616D 
 2078      612E0A00 
 2079              		.text
 2080              		.align	2
 2081              		.global	main
 2083              	main:
 2084              	.LFB0:
   1:../lab8.c     **** /*-------------------------------------------------------------------
   2:../lab8.c     **** **
   3:../lab8.c     **** **  Fichero:
   4:../lab8.c     **** **    lab8.c  17/5/2013
   5:../lab8.c     **** **
   6:../lab8.c     **** **    (c) J.M. Mendias
   7:../lab8.c     **** **    Programaci칩n de Sistemas y Dispositivos
   8:../lab8.c     **** **    Facultad de Inform치tica. Universidad Complutense de Madrid
   9:../lab8.c     **** **
  10:../lab8.c     **** **  Prop칩sito:
  11:../lab8.c     **** **    Test del laboratorio 8
  12:../lab8.c     **** **
  13:../lab8.c     **** **  Notas de dise침o:
  14:../lab8.c     **** **
  15:../lab8.c     **** **-----------------------------------------------------------------*/
  16:../lab8.c     **** 
  17:../lab8.c     **** #include <s3c44b0x.h>
  18:../lab8.c     **** #include <s3cev40.h>
  19:../lab8.c     **** #include <common_types.h>
  20:../lab8.c     **** #include <system.h>
  21:../lab8.c     **** #include <timers.h>
  22:../lab8.c     **** #include <uart.h>
  23:../lab8.c     **** #include <iic.h>
  24:../lab8.c     **** #include <at24c04.h>
  25:../lab8.c     **** 
  26:../lab8.c     **** void main( void )
  27:../lab8.c     **** {
 2085              		.loc 1 27 0
 2086              		.cfi_startproc
 2087              		@ Function supports interworking.
 2088              		@ args = 0, pretend = 0, frame = 1040
 2089              		@ frame_needed = 1, uses_anonymous_args = 0
 2090 0000 0DC0A0E1 		mov	ip, sp
 2091              	.LCFI0:
 2092              		.cfi_def_cfa_register 12
 2093 0004 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2094 0008 04B04CE2 		sub	fp, ip, #4
 2095              		.cfi_offset 14, -8
 2096              		.cfi_offset 13, -12
 2097              		.cfi_offset 11, -16
 2098              	.LCFI1:
 2099              		.cfi_def_cfa 11, 4
 2100 000c 41DE4DE2 		sub	sp, sp, #1040
  28:../lab8.c     ****     uint8 buffer[AT24C04_DEPTH], buffer_aux[AT24C04_DEPTH];
  29:../lab8.c     ****     uint16 i, j, delay;
  30:../lab8.c     **** 
  31:../lab8.c     ****     uint32 addr, data;
  32:../lab8.c     **** 
  33:../lab8.c     ****     sys_init();
 2101              		.loc 1 33 0
 2102 0010 FEFFFFEB 		bl	sys_init
  34:../lab8.c     ****     uart0_init();
 2103              		.loc 1 34 0
 2104 0014 FEFFFFEB 		bl	uart0_init
  35:../lab8.c     ****     timers_init();
 2105              		.loc 1 35 0
 2106 0018 FEFFFFEB 		bl	timers_init
  36:../lab8.c     ****     iic_init();
 2107              		.loc 1 36 0
 2108 001c FEFFFFEB 		bl	iic_init
  37:../lab8.c     **** 
  38:../lab8.c     ****     /************************************/
  39:../lab8.c     **** 
  40:../lab8.c     ****     uart0_puts( "\n\nCargando en RAM el contenido de IIC-EEPROM AT24C04:\n" );
 2109              		.loc 1 40 0
 2110 0020 84059FE5 		ldr	r0, .L29
 2111 0024 FEFFFFEB 		bl	uart0_puts
  41:../lab8.c     **** 
  42:../lab8.c     ****     /************************************/
  43:../lab8.c     **** 
  44:../lab8.c     ****     timer3_start();
 2112              		.loc 1 44 0
 2113 0028 FEFFFFEB 		bl	timer3_start
  45:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2114              		.loc 1 45 0
 2115 002c 0030A0E3 		mov	r3, #0
 2116 0030 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2117 0034 090000EA 		b	.L2
 2118              	.L3:
  46:../lab8.c     ****         at24c04_byteread( i, &buffer[i] );
 2119              		.loc 1 46 0 discriminator 2
 2120 0038 BE305BE1 		ldrh	r3, [fp, #-14]
 2121 003c 872F4BE2 		sub	r2, fp, #540
 2122 0040 033082E0 		add	r3, r2, r3
 2123 0044 BE205BE1 		ldrh	r2, [fp, #-14]
 2124 0048 0200A0E1 		mov	r0, r2
 2125 004c 0310A0E1 		mov	r1, r3
 2126 0050 FEFFFFEB 		bl	at24c04_byteread
  45:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2127              		.loc 1 45 0 discriminator 2
 2128 0054 BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 2129 0058 013083E2 		add	r3, r3, #1
 2130 005c BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2131              	.L2:
  45:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2132              		.loc 1 45 0 is_stmt 0 discriminator 1
 2133 0060 BE205BE1 		ldrh	r2, [fp, #-14]
 2134 0064 44359FE5 		ldr	r3, .L29+4
 2135 0068 030052E1 		cmp	r2, r3
 2136 006c F1FFFF9A 		bls	.L3
  47:../lab8.c     ****     delay = timer3_stop( );
 2137              		.loc 1 47 0 is_stmt 1
 2138 0070 FEFFFFEB 		bl	timer3_stop
 2139 0074 0030A0E1 		mov	r3, r0
 2140 0078 B2314BE1 		strh	r3, [fp, #-18]	@ movhi
  48:../lab8.c     ****     uart0_puts( " - Lectura aleatoria (" );
 2141              		.loc 1 48 0
 2142 007c 30059FE5 		ldr	r0, .L29+8
 2143 0080 FEFFFFEB 		bl	uart0_puts
  49:../lab8.c     ****     uart0_putint( AT24C04_DEPTH );
 2144              		.loc 1 49 0
 2145 0084 020CA0E3 		mov	r0, #512
 2146 0088 FEFFFFEB 		bl	uart0_putint
  50:../lab8.c     ****     uart0_puts( " bytes): " );
 2147              		.loc 1 50 0
 2148 008c 24059FE5 		ldr	r0, .L29+12
 2149 0090 FEFFFFEB 		bl	uart0_puts
  51:../lab8.c     ****     uart0_putint( delay/10 );
 2150              		.loc 1 51 0
 2151 0094 B2215BE1 		ldrh	r2, [fp, #-18]
 2152 0098 1C359FE5 		ldr	r3, .L29+16
 2153 009c 920383E0 		umull	r0, r3, r2, r3
 2154 00a0 A331A0E1 		mov	r3, r3, lsr #3
 2155 00a4 0338A0E1 		mov	r3, r3, asl #16
 2156 00a8 2338A0E1 		mov	r3, r3, lsr #16
 2157 00ac 0300A0E1 		mov	r0, r3
 2158 00b0 FEFFFFEB 		bl	uart0_putint
  52:../lab8.c     ****     uart0_puts( " ms\n" );
 2159              		.loc 1 52 0
 2160 00b4 04059FE5 		ldr	r0, .L29+20
 2161 00b8 FEFFFFEB 		bl	uart0_puts
  53:../lab8.c     **** 
  54:../lab8.c     ****     /************************************/
  55:../lab8.c     **** 
  56:../lab8.c     ****     timer3_start();
 2162              		.loc 1 56 0
 2163 00bc FEFFFFEB 		bl	timer3_start
  57:../lab8.c     ****     at24c04_load( buffer_aux );
 2164              		.loc 1 57 0
 2165 00c0 413E4BE2 		sub	r3, fp, #1040
 2166 00c4 0C3043E2 		sub	r3, r3, #12
 2167 00c8 0300A0E1 		mov	r0, r3
 2168 00cc FEFFFFEB 		bl	at24c04_load
  58:../lab8.c     ****     delay = timer3_stop( );
 2169              		.loc 1 58 0
 2170 00d0 FEFFFFEB 		bl	timer3_stop
 2171 00d4 0030A0E1 		mov	r3, r0
 2172 00d8 B2314BE1 		strh	r3, [fp, #-18]	@ movhi
  59:../lab8.c     ****     uart0_puts( " - Lectura secuencial (" );
 2173              		.loc 1 59 0
 2174 00dc E0049FE5 		ldr	r0, .L29+24
 2175 00e0 FEFFFFEB 		bl	uart0_puts
  60:../lab8.c     ****     uart0_putint( AT24C04_DEPTH );
 2176              		.loc 1 60 0
 2177 00e4 020CA0E3 		mov	r0, #512
 2178 00e8 FEFFFFEB 		bl	uart0_putint
  61:../lab8.c     ****     uart0_puts( " bytes): " );
 2179              		.loc 1 61 0
 2180 00ec C4049FE5 		ldr	r0, .L29+12
 2181 00f0 FEFFFFEB 		bl	uart0_puts
  62:../lab8.c     ****     uart0_putint( delay/10 );
 2182              		.loc 1 62 0
 2183 00f4 B2215BE1 		ldrh	r2, [fp, #-18]
 2184 00f8 BC349FE5 		ldr	r3, .L29+16
 2185 00fc 921383E0 		umull	r1, r3, r2, r3
 2186 0100 A331A0E1 		mov	r3, r3, lsr #3
 2187 0104 0338A0E1 		mov	r3, r3, asl #16
 2188 0108 2338A0E1 		mov	r3, r3, lsr #16
 2189 010c 0300A0E1 		mov	r0, r3
 2190 0110 FEFFFFEB 		bl	uart0_putint
  63:../lab8.c     ****     uart0_puts( " ms\n" );
 2191              		.loc 1 63 0
 2192 0114 A4049FE5 		ldr	r0, .L29+20
 2193 0118 FEFFFFEB 		bl	uart0_puts
  64:../lab8.c     **** 
  65:../lab8.c     ****     /************************************/
  66:../lab8.c     **** 
  67:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2194              		.loc 1 67 0
 2195 011c 0030A0E3 		mov	r3, #0
 2196 0120 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2197 0124 120000EA 		b	.L4
 2198              	.L6:
  68:../lab8.c     ****         if( buffer[i] != buffer_aux[i] )
 2199              		.loc 1 68 0
 2200 0128 BE205BE1 		ldrh	r2, [fp, #-14]
 2201 012c 94349FE5 		ldr	r3, .L29+28
 2202 0130 0C004BE2 		sub	r0, fp, #12
 2203 0134 022080E0 		add	r2, r0, r2
 2204 0138 033082E0 		add	r3, r2, r3
 2205 013c 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 2206 0140 BE105BE1 		ldrh	r1, [fp, #-14]
 2207 0144 80349FE5 		ldr	r3, .L29+32
 2208 0148 0C004BE2 		sub	r0, fp, #12
 2209 014c 011080E0 		add	r1, r0, r1
 2210 0150 033081E0 		add	r3, r1, r3
 2211 0154 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2212 0158 030052E1 		cmp	r2, r3
 2213 015c 0100000A 		beq	.L5
  69:../lab8.c     ****             uart0_puts( "ERROR: lectura aleatoria y secuencial no son coincidentes\n" );
 2214              		.loc 1 69 0
 2215 0160 68049FE5 		ldr	r0, .L29+36
 2216 0164 FEFFFFEB 		bl	uart0_puts
 2217              	.L5:
  67:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2218              		.loc 1 67 0
 2219 0168 BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 2220 016c 013083E2 		add	r3, r3, #1
 2221 0170 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2222              	.L4:
  67:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2223              		.loc 1 67 0 is_stmt 0 discriminator 1
 2224 0174 BE205BE1 		ldrh	r2, [fp, #-14]
 2225 0178 30349FE5 		ldr	r3, .L29+4
 2226 017c 030052E1 		cmp	r2, r3
 2227 0180 E8FFFF9A 		bls	.L6
  70:../lab8.c     **** 
  71:../lab8.c     ****     /************************************/
  72:../lab8.c     **** 
  73:../lab8.c     ****     uart0_puts( "\nVolcado del contenido inicial de la memoria IIC-EEPROM AT24C04:\n" );
 2228              		.loc 1 73 0 is_stmt 1
 2229 0184 48049FE5 		ldr	r0, .L29+40
 2230 0188 FEFFFFEB 		bl	uart0_puts
  74:../lab8.c     **** 
  75:../lab8.c     ****     for( i=0; i < (AT24C04_DEPTH>>4); i++ ){
 2231              		.loc 1 75 0
 2232 018c 0030A0E3 		mov	r3, #0
 2233 0190 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2234 0194 660000EA 		b	.L7
 2235              	.L17:
  76:../lab8.c     ****     	uart0_puts( "\n" );
 2236              		.loc 1 76 0
 2237 0198 38049FE5 		ldr	r0, .L29+44
 2238 019c FEFFFFEB 		bl	uart0_puts
  77:../lab8.c     ****     	if( i<<4 <= 0xf )
 2239              		.loc 1 77 0
 2240 01a0 BE305BE1 		ldrh	r3, [fp, #-14]
 2241 01a4 0332A0E1 		mov	r3, r3, asl #4
 2242 01a8 0F0053E3 		cmp	r3, #15
 2243 01ac 020000CA 		bgt	.L8
  78:../lab8.c     ****     		uart0_puts( "00" );
 2244              		.loc 1 78 0
 2245 01b0 24049FE5 		ldr	r0, .L29+48
 2246 01b4 FEFFFFEB 		bl	uart0_puts
 2247 01b8 050000EA 		b	.L9
 2248              	.L8:
  79:../lab8.c     ****     	else if( i<<4 <= 0xff )
 2249              		.loc 1 79 0
 2250 01bc BE305BE1 		ldrh	r3, [fp, #-14]
 2251 01c0 0332A0E1 		mov	r3, r3, asl #4
 2252 01c4 FF0053E3 		cmp	r3, #255
 2253 01c8 010000CA 		bgt	.L9
  80:../lab8.c     ****     	    uart0_putchar( '0' );
 2254              		.loc 1 80 0
 2255 01cc 3000A0E3 		mov	r0, #48
 2256 01d0 FEFFFFEB 		bl	uart0_putchar
 2257              	.L9:
  81:../lab8.c     ****     	uart0_puthex( i<<4 );
 2258              		.loc 1 81 0
 2259 01d4 BE305BE1 		ldrh	r3, [fp, #-14]
 2260 01d8 0332A0E1 		mov	r3, r3, asl #4
 2261 01dc 0300A0E1 		mov	r0, r3
 2262 01e0 FEFFFFEB 		bl	uart0_puthex
  82:../lab8.c     ****         uart0_puts( "h:"  );
 2263              		.loc 1 82 0
 2264 01e4 F4039FE5 		ldr	r0, .L29+52
 2265 01e8 FEFFFFEB 		bl	uart0_puts
  83:../lab8.c     ****         for( j=0; j<16; j++ )
 2266              		.loc 1 83 0
 2267 01ec 0030A0E3 		mov	r3, #0
 2268 01f0 B0314BE1 		strh	r3, [fp, #-16]	@ movhi
 2269 01f4 1A0000EA 		b	.L10
 2270              	.L12:
  84:../lab8.c     ****         {
  85:../lab8.c     ****             if( buffer[(i<<4)+j] <= 0xf )
 2271              		.loc 1 85 0
 2272 01f8 BE305BE1 		ldrh	r3, [fp, #-14]
 2273 01fc 0322A0E1 		mov	r2, r3, asl #4
 2274 0200 B0315BE1 		ldrh	r3, [fp, #-16]
 2275 0204 032082E0 		add	r2, r2, r3
 2276 0208 B8339FE5 		ldr	r3, .L29+28
 2277 020c 0C104BE2 		sub	r1, fp, #12
 2278 0210 022081E0 		add	r2, r1, r2
 2279 0214 033082E0 		add	r3, r2, r3
 2280 0218 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2281 021c 0F0053E3 		cmp	r3, #15
 2282 0220 0100008A 		bhi	.L11
  86:../lab8.c     ****                 uart0_putchar( '0' );
 2283              		.loc 1 86 0
 2284 0224 3000A0E3 		mov	r0, #48
 2285 0228 FEFFFFEB 		bl	uart0_putchar
 2286              	.L11:
  87:../lab8.c     ****             uart0_puthex( buffer[(i<<4)+j] );
 2287              		.loc 1 87 0
 2288 022c BE305BE1 		ldrh	r3, [fp, #-14]
 2289 0230 0322A0E1 		mov	r2, r3, asl #4
 2290 0234 B0315BE1 		ldrh	r3, [fp, #-16]
 2291 0238 032082E0 		add	r2, r2, r3
 2292 023c 84339FE5 		ldr	r3, .L29+28
 2293 0240 0C004BE2 		sub	r0, fp, #12
 2294 0244 022080E0 		add	r2, r0, r2
 2295 0248 033082E0 		add	r3, r2, r3
 2296 024c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2297 0250 0300A0E1 		mov	r0, r3
 2298 0254 FEFFFFEB 		bl	uart0_puthex
  83:../lab8.c     ****         for( j=0; j<16; j++ )
 2299              		.loc 1 83 0
 2300 0258 B0315BE1 		ldrh	r3, [fp, #-16]	@ movhi
 2301 025c 013083E2 		add	r3, r3, #1
 2302 0260 B0314BE1 		strh	r3, [fp, #-16]	@ movhi
 2303              	.L10:
  83:../lab8.c     ****         for( j=0; j<16; j++ )
 2304              		.loc 1 83 0 is_stmt 0 discriminator 1
 2305 0264 B0315BE1 		ldrh	r3, [fp, #-16]
 2306 0268 0F0053E3 		cmp	r3, #15
 2307 026c E1FFFF9A 		bls	.L12
  88:../lab8.c     ****         }
  89:../lab8.c     ****         uart0_puts( " ; " );
 2308              		.loc 1 89 0 is_stmt 1
 2309 0270 6C039FE5 		ldr	r0, .L29+56
 2310 0274 FEFFFFEB 		bl	uart0_puts
  90:../lab8.c     ****         for( j=0; j<16; j++ )
 2311              		.loc 1 90 0
 2312 0278 0030A0E3 		mov	r3, #0
 2313 027c B0314BE1 		strh	r3, [fp, #-16]	@ movhi
 2314 0280 250000EA 		b	.L13
 2315              	.L16:
  91:../lab8.c     ****               uart0_putchar( ( (31<buffer[(i<<4)+j]) && (buffer[(i<<4)+j]<127) ? buffer[(i<<4)+j] :
 2316              		.loc 1 91 0
 2317 0284 BE305BE1 		ldrh	r3, [fp, #-14]
 2318 0288 0322A0E1 		mov	r2, r3, asl #4
 2319 028c B0315BE1 		ldrh	r3, [fp, #-16]
 2320 0290 032082E0 		add	r2, r2, r3
 2321 0294 2C339FE5 		ldr	r3, .L29+28
 2322 0298 0C104BE2 		sub	r1, fp, #12
 2323 029c 022081E0 		add	r2, r1, r2
 2324 02a0 033082E0 		add	r3, r2, r3
 2325 02a4 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2326 02a8 1F0053E3 		cmp	r3, #31
 2327 02ac 1400009A 		bls	.L14
 2328              		.loc 1 91 0 is_stmt 0 discriminator 1
 2329 02b0 BE305BE1 		ldrh	r3, [fp, #-14]
 2330 02b4 0322A0E1 		mov	r2, r3, asl #4
 2331 02b8 B0315BE1 		ldrh	r3, [fp, #-16]
 2332 02bc 032082E0 		add	r2, r2, r3
 2333 02c0 00339FE5 		ldr	r3, .L29+28
 2334 02c4 0C004BE2 		sub	r0, fp, #12
 2335 02c8 022080E0 		add	r2, r0, r2
 2336 02cc 033082E0 		add	r3, r2, r3
 2337 02d0 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2338 02d4 7E0053E3 		cmp	r3, #126
 2339 02d8 0900008A 		bhi	.L14
 2340 02dc BE305BE1 		ldrh	r3, [fp, #-14]
 2341 02e0 0322A0E1 		mov	r2, r3, asl #4
 2342 02e4 B0315BE1 		ldrh	r3, [fp, #-16]
 2343 02e8 032082E0 		add	r2, r2, r3
 2344 02ec D4329FE5 		ldr	r3, .L29+28
 2345 02f0 0C104BE2 		sub	r1, fp, #12
 2346 02f4 022081E0 		add	r2, r1, r2
 2347 02f8 033082E0 		add	r3, r2, r3
 2348 02fc 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2349 0300 000000EA 		b	.L15
 2350              	.L14:
 2351              		.loc 1 91 0 discriminator 2
 2352 0304 2E30A0E3 		mov	r3, #46
 2353              	.L15:
 2354              		.loc 1 91 0 discriminator 3
 2355 0308 0300A0E1 		mov	r0, r3
 2356 030c FEFFFFEB 		bl	uart0_putchar
  90:../lab8.c     ****         for( j=0; j<16; j++ )
 2357              		.loc 1 90 0 is_stmt 1 discriminator 3
 2358 0310 B0315BE1 		ldrh	r3, [fp, #-16]	@ movhi
 2359 0314 013083E2 		add	r3, r3, #1
 2360 0318 B0314BE1 		strh	r3, [fp, #-16]	@ movhi
 2361              	.L13:
  90:../lab8.c     ****         for( j=0; j<16; j++ )
 2362              		.loc 1 90 0 is_stmt 0 discriminator 1
 2363 031c B0315BE1 		ldrh	r3, [fp, #-16]
 2364 0320 0F0053E3 		cmp	r3, #15
 2365 0324 D6FFFF9A 		bls	.L16
  75:../lab8.c     ****     for( i=0; i < (AT24C04_DEPTH>>4); i++ ){
 2366              		.loc 1 75 0 is_stmt 1
 2367 0328 BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 2368 032c 013083E2 		add	r3, r3, #1
 2369 0330 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2370              	.L7:
  75:../lab8.c     ****     for( i=0; i < (AT24C04_DEPTH>>4); i++ ){
 2371              		.loc 1 75 0 is_stmt 0 discriminator 1
 2372 0334 BE305BE1 		ldrh	r3, [fp, #-14]
 2373 0338 1F0053E3 		cmp	r3, #31
 2374 033c 95FFFF9A 		bls	.L17
  92:../lab8.c     ****     };
  93:../lab8.c     **** 
  94:../lab8.c     ****     /************************************/
  95:../lab8.c     **** 
  96:../lab8.c     ****     uart0_puts( "\n\nModificacion del contenido de la memoria IIC-EEPROM AT24C04:\n" );
 2375              		.loc 1 96 0 is_stmt 1
 2376 0340 A0029FE5 		ldr	r0, .L29+60
 2377 0344 FEFFFFEB 		bl	uart0_puts
  97:../lab8.c     **** 
  98:../lab8.c     ****     for( i=0; i<5; i++ )
 2378              		.loc 1 98 0
 2379 0348 0030A0E3 		mov	r3, #0
 2380 034c BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2381 0350 120000EA 		b	.L18
 2382              	.L19:
  99:../lab8.c     ****     {
 100:../lab8.c     ****         uart0_puts( "  - Introduzca una direccion (0h-1ffh): " );
 2383              		.loc 1 100 0 discriminator 2
 2384 0354 90029FE5 		ldr	r0, .L29+64
 2385 0358 FEFFFFEB 		bl	uart0_puts
 101:../lab8.c     ****         addr = uart0_gethex( );
 2386              		.loc 1 101 0 discriminator 2
 2387 035c FEFFFFEB 		bl	uart0_gethex
 2388 0360 18000BE5 		str	r0, [fp, #-24]
 102:../lab8.c     ****         uart0_puts( "  - Introduzca el dato (0h-ffh): " );
 2389              		.loc 1 102 0 discriminator 2
 2390 0364 84029FE5 		ldr	r0, .L29+68
 2391 0368 FEFFFFEB 		bl	uart0_puts
 103:../lab8.c     ****         data = uart0_gethex( );
 2392              		.loc 1 103 0 discriminator 2
 2393 036c FEFFFFEB 		bl	uart0_gethex
 2394 0370 1C000BE5 		str	r0, [fp, #-28]
 104:../lab8.c     ****         buffer[addr] = data;
 2395              		.loc 1 104 0 discriminator 2
 2396 0374 1C301BE5 		ldr	r3, [fp, #-28]
 2397 0378 FF2003E2 		and	r2, r3, #255
 2398 037c 44329FE5 		ldr	r3, .L29+28
 2399 0380 18101BE5 		ldr	r1, [fp, #-24]
 2400 0384 0C004BE2 		sub	r0, fp, #12
 2401 0388 011080E0 		add	r1, r0, r1
 2402 038c 033081E0 		add	r3, r1, r3
 2403 0390 0020C3E5 		strb	r2, [r3, #0]
  98:../lab8.c     ****     for( i=0; i<5; i++ )
 2404              		.loc 1 98 0 discriminator 2
 2405 0394 BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 2406 0398 013083E2 		add	r3, r3, #1
 2407 039c BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2408              	.L18:
  98:../lab8.c     ****     for( i=0; i<5; i++ )
 2409              		.loc 1 98 0 is_stmt 0 discriminator 1
 2410 03a0 BE305BE1 		ldrh	r3, [fp, #-14]
 2411 03a4 040053E3 		cmp	r3, #4
 2412 03a8 E9FFFF9A 		bls	.L19
 105:../lab8.c     ****     }
 106:../lab8.c     **** 
 107:../lab8.c     ****     /************************************/
 108:../lab8.c     **** 
 109:../lab8.c     ****     uart0_puts( "\nVolcando en la IIC-EEPROM AT24C04 el contenido de la RAM:\n" );
 2413              		.loc 1 109 0 is_stmt 1
 2414 03ac 40029FE5 		ldr	r0, .L29+72
 2415 03b0 FEFFFFEB 		bl	uart0_puts
 110:../lab8.c     **** 
 111:../lab8.c     ****     /************************************/
 112:../lab8.c     **** 
 113:../lab8.c     ****     timer3_start();
 2416              		.loc 1 113 0
 2417 03b4 FEFFFFEB 		bl	timer3_start
 114:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2418              		.loc 1 114 0
 2419 03b8 0030A0E3 		mov	r3, #0
 2420 03bc BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2421 03c0 0C0000EA 		b	.L20
 2422              	.L21:
 115:../lab8.c     ****         at24c04_bytewrite( i, buffer[i] );
 2423              		.loc 1 115 0 discriminator 2
 2424 03c4 BE205BE1 		ldrh	r2, [fp, #-14]
 2425 03c8 F8319FE5 		ldr	r3, .L29+28
 2426 03cc 0C104BE2 		sub	r1, fp, #12
 2427 03d0 022081E0 		add	r2, r1, r2
 2428 03d4 033082E0 		add	r3, r2, r3
 2429 03d8 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2430 03dc BE205BE1 		ldrh	r2, [fp, #-14]
 2431 03e0 0200A0E1 		mov	r0, r2
 2432 03e4 0310A0E1 		mov	r1, r3
 2433 03e8 FEFFFFEB 		bl	at24c04_bytewrite
 114:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2434              		.loc 1 114 0 discriminator 2
 2435 03ec BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 2436 03f0 013083E2 		add	r3, r3, #1
 2437 03f4 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2438              	.L20:
 114:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2439              		.loc 1 114 0 is_stmt 0 discriminator 1
 2440 03f8 BE205BE1 		ldrh	r2, [fp, #-14]
 2441 03fc AC319FE5 		ldr	r3, .L29+4
 2442 0400 030052E1 		cmp	r2, r3
 2443 0404 EEFFFF9A 		bls	.L21
 116:../lab8.c     ****     delay = timer3_stop( );
 2444              		.loc 1 116 0 is_stmt 1
 2445 0408 FEFFFFEB 		bl	timer3_stop
 2446 040c 0030A0E1 		mov	r3, r0
 2447 0410 B2314BE1 		strh	r3, [fp, #-18]	@ movhi
 117:../lab8.c     ****     uart0_puts( " - Escritura aleatoria (" );
 2448              		.loc 1 117 0
 2449 0414 DC019FE5 		ldr	r0, .L29+76
 2450 0418 FEFFFFEB 		bl	uart0_puts
 118:../lab8.c     ****     uart0_putint( AT24C04_DEPTH );
 2451              		.loc 1 118 0
 2452 041c 020CA0E3 		mov	r0, #512
 2453 0420 FEFFFFEB 		bl	uart0_putint
 119:../lab8.c     ****     uart0_puts( " bytes): " );
 2454              		.loc 1 119 0
 2455 0424 8C019FE5 		ldr	r0, .L29+12
 2456 0428 FEFFFFEB 		bl	uart0_puts
 120:../lab8.c     ****     uart0_putint( delay/10 );
 2457              		.loc 1 120 0
 2458 042c B2215BE1 		ldrh	r2, [fp, #-18]
 2459 0430 84319FE5 		ldr	r3, .L29+16
 2460 0434 920383E0 		umull	r0, r3, r2, r3
 2461 0438 A331A0E1 		mov	r3, r3, lsr #3
 2462 043c 0338A0E1 		mov	r3, r3, asl #16
 2463 0440 2338A0E1 		mov	r3, r3, lsr #16
 2464 0444 0300A0E1 		mov	r0, r3
 2465 0448 FEFFFFEB 		bl	uart0_putint
 121:../lab8.c     ****     uart0_puts( " ms\n" );
 2466              		.loc 1 121 0
 2467 044c 6C019FE5 		ldr	r0, .L29+20
 2468 0450 FEFFFFEB 		bl	uart0_puts
 122:../lab8.c     **** 
 123:../lab8.c     ****     at24c04_load( buffer_aux );
 2469              		.loc 1 123 0
 2470 0454 413E4BE2 		sub	r3, fp, #1040
 2471 0458 0C3043E2 		sub	r3, r3, #12
 2472 045c 0300A0E1 		mov	r0, r3
 2473 0460 FEFFFFEB 		bl	at24c04_load
 124:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2474              		.loc 1 124 0
 2475 0464 0030A0E3 		mov	r3, #0
 2476 0468 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2477 046c 120000EA 		b	.L22
 2478              	.L24:
 125:../lab8.c     ****         if( buffer[i] != buffer_aux[i] )
 2479              		.loc 1 125 0
 2480 0470 BE205BE1 		ldrh	r2, [fp, #-14]
 2481 0474 4C319FE5 		ldr	r3, .L29+28
 2482 0478 0C104BE2 		sub	r1, fp, #12
 2483 047c 022081E0 		add	r2, r1, r2
 2484 0480 033082E0 		add	r3, r2, r3
 2485 0484 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 2486 0488 BE105BE1 		ldrh	r1, [fp, #-14]
 2487 048c 38319FE5 		ldr	r3, .L29+32
 2488 0490 0C004BE2 		sub	r0, fp, #12
 2489 0494 011080E0 		add	r1, r0, r1
 2490 0498 033081E0 		add	r3, r1, r3
 2491 049c 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2492 04a0 030052E1 		cmp	r2, r3
 2493 04a4 0100000A 		beq	.L23
 126:../lab8.c     ****             uart0_puts( "ERROR: La escritura aleatoria falla.\n" );
 2494              		.loc 1 126 0
 2495 04a8 4C019FE5 		ldr	r0, .L29+80
 2496 04ac FEFFFFEB 		bl	uart0_puts
 2497              	.L23:
 124:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2498              		.loc 1 124 0
 2499 04b0 BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 2500 04b4 013083E2 		add	r3, r3, #1
 2501 04b8 BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2502              	.L22:
 124:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2503              		.loc 1 124 0 is_stmt 0 discriminator 1
 2504 04bc BE205BE1 		ldrh	r2, [fp, #-14]
 2505 04c0 E8309FE5 		ldr	r3, .L29+4
 2506 04c4 030052E1 		cmp	r2, r3
 2507 04c8 E8FFFF9A 		bls	.L24
 127:../lab8.c     **** 
 128:../lab8.c     ****     /************************************/
 129:../lab8.c     **** 
 130:../lab8.c     ****     timer3_start();
 2508              		.loc 1 130 0 is_stmt 1
 2509 04cc FEFFFFEB 		bl	timer3_start
 131:../lab8.c     ****     at24c04_store( buffer );
 2510              		.loc 1 131 0
 2511 04d0 873F4BE2 		sub	r3, fp, #540
 2512 04d4 0300A0E1 		mov	r0, r3
 2513 04d8 FEFFFFEB 		bl	at24c04_store
 132:../lab8.c     ****     delay = timer3_stop( );
 2514              		.loc 1 132 0
 2515 04dc FEFFFFEB 		bl	timer3_stop
 2516 04e0 0030A0E1 		mov	r3, r0
 2517 04e4 B2314BE1 		strh	r3, [fp, #-18]	@ movhi
 133:../lab8.c     ****     uart0_puts( " - Escritura secuencial (" );
 2518              		.loc 1 133 0
 2519 04e8 10019FE5 		ldr	r0, .L29+84
 2520 04ec FEFFFFEB 		bl	uart0_puts
 134:../lab8.c     ****     uart0_putint( AT24C04_DEPTH );
 2521              		.loc 1 134 0
 2522 04f0 020CA0E3 		mov	r0, #512
 2523 04f4 FEFFFFEB 		bl	uart0_putint
 135:../lab8.c     ****     uart0_puts( " bytes): " );
 2524              		.loc 1 135 0
 2525 04f8 B8009FE5 		ldr	r0, .L29+12
 2526 04fc FEFFFFEB 		bl	uart0_puts
 136:../lab8.c     ****     uart0_putint( delay/10 );
 2527              		.loc 1 136 0
 2528 0500 B2215BE1 		ldrh	r2, [fp, #-18]
 2529 0504 B0309FE5 		ldr	r3, .L29+16
 2530 0508 921383E0 		umull	r1, r3, r2, r3
 2531 050c A331A0E1 		mov	r3, r3, lsr #3
 2532 0510 0338A0E1 		mov	r3, r3, asl #16
 2533 0514 2338A0E1 		mov	r3, r3, lsr #16
 2534 0518 0300A0E1 		mov	r0, r3
 2535 051c FEFFFFEB 		bl	uart0_putint
 137:../lab8.c     ****     uart0_puts( " ms\n" );
 2536              		.loc 1 137 0
 2537 0520 98009FE5 		ldr	r0, .L29+20
 2538 0524 FEFFFFEB 		bl	uart0_puts
 138:../lab8.c     **** 
 139:../lab8.c     ****     at24c04_load( buffer_aux );
 2539              		.loc 1 139 0
 2540 0528 413E4BE2 		sub	r3, fp, #1040
 2541 052c 0C3043E2 		sub	r3, r3, #12
 2542 0530 0300A0E1 		mov	r0, r3
 2543 0534 FEFFFFEB 		bl	at24c04_load
 140:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2544              		.loc 1 140 0
 2545 0538 0030A0E3 		mov	r3, #0
 2546 053c BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2547 0540 120000EA 		b	.L25
 2548              	.L27:
 141:../lab8.c     ****         if( buffer[i] != buffer_aux[i] )
 2549              		.loc 1 141 0
 2550 0544 BE205BE1 		ldrh	r2, [fp, #-14]
 2551 0548 78309FE5 		ldr	r3, .L29+28
 2552 054c 0C004BE2 		sub	r0, fp, #12
 2553 0550 022080E0 		add	r2, r0, r2
 2554 0554 033082E0 		add	r3, r2, r3
 2555 0558 0020D3E5 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 2556 055c BE105BE1 		ldrh	r1, [fp, #-14]
 2557 0560 64309FE5 		ldr	r3, .L29+32
 2558 0564 0C004BE2 		sub	r0, fp, #12
 2559 0568 011080E0 		add	r1, r0, r1
 2560 056c 033081E0 		add	r3, r1, r3
 2561 0570 0030D3E5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 2562 0574 030052E1 		cmp	r2, r3
 2563 0578 0100000A 		beq	.L26
 142:../lab8.c     ****             uart0_puts( "ERROR: La escritura secuencial falla.\n" );
 2564              		.loc 1 142 0
 2565 057c 80009FE5 		ldr	r0, .L29+88
 2566 0580 FEFFFFEB 		bl	uart0_puts
 2567              	.L26:
 140:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2568              		.loc 1 140 0
 2569 0584 BE305BE1 		ldrh	r3, [fp, #-14]	@ movhi
 2570 0588 013083E2 		add	r3, r3, #1
 2571 058c BE304BE1 		strh	r3, [fp, #-14]	@ movhi
 2572              	.L25:
 140:../lab8.c     ****     for( i=0; i<AT24C04_DEPTH; i++ )
 2573              		.loc 1 140 0 is_stmt 0 discriminator 1
 2574 0590 BE205BE1 		ldrh	r2, [fp, #-14]
 2575 0594 14309FE5 		ldr	r3, .L29+4
 2576 0598 030052E1 		cmp	r2, r3
 2577 059c E8FFFF9A 		bls	.L27
 143:../lab8.c     **** 
 144:../lab8.c     ****     /************************************/
 145:../lab8.c     **** 
 146:../lab8.c     ****     uart0_puts( "\nApague la placa y vuelva a cargar y ejecutar el programa.\n" );
 2578              		.loc 1 146 0 is_stmt 1
 2579 05a0 60009FE5 		ldr	r0, .L29+92
 2580 05a4 FEFFFFEB 		bl	uart0_puts
 2581              	.L28:
 147:../lab8.c     **** 
 148:../lab8.c     ****     /************************************/
 149:../lab8.c     **** 
 150:../lab8.c     ****     while( 1 );
 2582              		.loc 1 150 0 discriminator 1
 2583 05a8 FEFFFFEA 		b	.L28
 2584              	.L30:
 2585              		.align	2
 2586              	.L29:
 2587 05ac 00000000 		.word	.LC0
 2588 05b0 FF010000 		.word	511
 2589 05b4 38000000 		.word	.LC1
 2590 05b8 50000000 		.word	.LC2
 2591 05bc CDCCCCCC 		.word	-858993459
 2592 05c0 5C000000 		.word	.LC3
 2593 05c4 64000000 		.word	.LC4
 2594 05c8 F0FDFFFF 		.word	-528
 2595 05cc F0FBFFFF 		.word	-1040
 2596 05d0 7C000000 		.word	.LC5
 2597 05d4 B8000000 		.word	.LC6
 2598 05d8 FC000000 		.word	.LC7
 2599 05dc 00010000 		.word	.LC8
 2600 05e0 04010000 		.word	.LC9
 2601 05e4 08010000 		.word	.LC10
 2602 05e8 0C010000 		.word	.LC11
 2603 05ec 4C010000 		.word	.LC12
 2604 05f0 78010000 		.word	.LC13
 2605 05f4 9C010000 		.word	.LC14
 2606 05f8 D8010000 		.word	.LC15
 2607 05fc F4010000 		.word	.LC16
 2608 0600 1C020000 		.word	.LC17
 2609 0604 38020000 		.word	.LC18
 2610 0608 60020000 		.word	.LC19
 2611              		.cfi_endproc
 2612              	.LFE0:
 2614              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 lab8.c
C:\Users\USUARI~1\AppData\Local\Temp\ccBGMez9.s:2013   .rodata:00000000 $d
C:\Users\USUARI~1\AppData\Local\Temp\ccBGMez9.s:2080   .text:00000000 $a
C:\Users\USUARI~1\AppData\Local\Temp\ccBGMez9.s:2083   .text:00000000 main
C:\Users\USUARI~1\AppData\Local\Temp\ccBGMez9.s:2587   .text:000005ac $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
sys_init
uart0_init
timers_init
iic_init
uart0_puts
timer3_start
at24c04_byteread
timer3_stop
uart0_putint
at24c04_load
uart0_putchar
uart0_puthex
uart0_gethex
at24c04_bytewrite
at24c04_store
